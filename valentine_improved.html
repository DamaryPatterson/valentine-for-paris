<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>For Paris ‚ù§Ô∏è</title>

<link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;700&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">

<!-- EmailJS -->
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>

<style>
body{
    margin:0;
    font-family:'Poppins', sans-serif;
    background:linear-gradient(135deg,#ff758c,#ff7eb3,#ffd6e0);
    height:100vh;
    display:flex;
    justify-content:center;
    align-items:center;
    overflow:hidden;
    text-align:center;
    color:white;
}

h1, h2{
    font-family:'Dancing Script', cursive;
}

/* envelope intro */
#envelopeScreen{
    position:fixed;
    width:100%;
    height:100%;
    background:linear-gradient(135deg,#ff4d6d,#ff99ac);
    display:flex;
    justify-content:center;
    align-items:center;
    flex-direction:column;
    z-index:99999;
    cursor:pointer;
    transition:opacity 0.8s ease, transform 0.8s ease;
}
#envelopeScreen.hidden{
    opacity:0;
    transform:scale(0.8);
    pointer-events:none;
}
.envelope{
    font-size:120px;
    animation:pulse 1.5s infinite;
}
@keyframes pulse{
    0%{transform:scale(1);}
    50%{transform:scale(1.1);}
    100%{transform:scale(1);}
}

/* background items */
.heart-float{
    position:absolute;
    font-size:22px;
    animation:float 8s linear infinite;
}
.balloon{
    position:absolute;
    font-size:28px;
    animation:float 10s linear infinite;
}
.teddy{
    position:absolute;
    font-size:40px;
    bottom:20px;
}
@keyframes float{
    0%{transform:translateY(100vh);opacity:1;}
    100%{transform:translateY(-10vh);opacity:0;}
}

/* slider */
.slider-box{
    margin:20px auto;
    width:300px;
    height:60px;
    background:rgba(255,255,255,0.3);
    border-radius:40px;
    position:relative;
    box-shadow:0 4px 15px rgba(0,0,0,0.2);
}
#heart{
    position:absolute;
    top:5px;
    left:5px;
    width:50px;
    height:50px;
    background:#ff4d6d;
    border-radius:50%;
    display:flex;
    justify-content:center;
    align-items:center;
    cursor:grab;
    font-size:22px;
    transition:transform 0.2s ease;
    box-shadow:0 3px 10px rgba(0,0,0,0.3);
}
#heart:active{
    cursor:grabbing;
    transform:scale(1.1);
}

/* unlock screen */
#unlock{
    opacity:0;
    transform:scale(0.9);
    animation:fadeIn 1s ease forwards;
    animation-delay:0.5s;
}
@keyframes fadeIn{
    to{opacity:1; transform:scale(1);}
}
#unlock.hidden{
    animation:fadeOut 0.6s ease forwards;
}
@keyframes fadeOut{
    to{opacity:0; transform:scale(0.9);}
}

/* letter */
#letter{
    display:none;
    background:white;
    color:#e63946;
    padding:40px;
    border-radius:25px;
    box-shadow:0 10px 40px rgba(0,0,0,0.3);
    max-width:500px;
    opacity:0;
    transform:translateY(30px);
}
#letter.show{
    display:block;
    animation:slideUp 0.8s ease forwards;
}
@keyframes slideUp{
    to{opacity:1; transform:translateY(0);}
}

/* Paris photo frame */
.paris-frame{
    position:relative;
    width:200px;
    height:200px;
    margin:20px auto;
    border-radius:50%;
    overflow:visible;
}
.paris-photo{
    width:200px;
    height:200px;
    border-radius:50%;
    object-fit:cover;
    border:5px solid #ff4d6d;
    box-shadow:0 5px 20px rgba(0,0,0,0.3);
    position:relative;
    z-index:2;
}
.frame-decoration{
    position:absolute;
    font-size:30px;
    animation:rotate 8s linear infinite;
}
@keyframes rotate{
    from{transform:rotate(0deg) translateX(120px) rotate(0deg);}
    to{transform:rotate(360deg) translateX(120px) rotate(-360deg);}
}
.decoration-1{animation-delay:0s;}
.decoration-2{animation-delay:-2s;}
.decoration-3{animation-delay:-4s;}
.decoration-4{animation-delay:-6s;}

/* buttons */
.btn{
    padding:12px 30px;
    border:none;
    border-radius:25px;
    font-size:18px;
    cursor:pointer;
    margin:10px;
    font-family:'Poppins', sans-serif;
    font-weight:600;
    transition:all 0.3s ease;
    box-shadow:0 4px 15px rgba(0,0,0,0.2);
}
.btn:hover{
    transform:translateY(-2px);
    box-shadow:0 6px 20px rgba(0,0,0,0.3);
}
#yes{
    background:#ff4d6d;
    color:white;
}
#yes:hover{
    background:#e63946;
}
#no{
    background:#444;
    color:white;
    position:absolute;
    transition:all 0.3s ease;
}

/* celebration & sad screens */
#celebration,#sadScreen{
    display:none;
    position:fixed;
    width:100%;
    height:100%;
    top:0;
    left:0;
    justify-content:center;
    align-items:center;
    flex-direction:column;
    z-index:9999;
    opacity:0;
}
#celebration{
    background:radial-gradient(circle,#ff4d6d,#ff99ac);
}
#sadScreen{
    background:#222;
    color:white;
}
#celebration.show, #sadScreen.show{
    display:flex;
    animation:fadeIn 1s ease forwards;
}

/* confetti */
.confetti{
    position:absolute;
    width:10px;
    height:10px;
    background:#ff4d6d;
    animation:confettiFall 3s linear infinite;
}
@keyframes confettiFall{
    0%{transform:translateY(-10vh) rotate(0deg);opacity:1;}
    100%{transform:translateY(110vh) rotate(720deg);opacity:0;}
}

.celebration-photo{
    width:300px;
    height:300px;
    border-radius:50%;
    object-fit:cover;
    border:8px solid white;
    box-shadow:0 10px 40px rgba(0,0,0,0.4);
    margin:20px;
    animation:pulse 2s infinite;
}
</style>
</head>

<body>

<!-- Envelope -->
<div id="envelopeScreen" onclick="openEnvelope()">
    <div class="envelope">üíå</div>
    <h2>Tap to open your Valentine message</h2>
</div>

<audio id="bgmusic" loop>
    <source src="Olivia Dean - So Easy (To Fall In Love).mp3" type="audio/mpeg">
</audio>

<div class="teddy" style="left:10%">üß∏</div>
<div class="teddy" style="right:10%">üß∏</div>

<div id="unlock">
    <h1 style="font-size:50px;">Paris Wright ‚ù§Ô∏è</h1>

    <p style="font-size:20px; font-weight:300;">
    Tap the heart, enjoy the music for a moment üéµ<br>
    then slide it to unlock your message ‚ù§Ô∏è
    </p>

    <div class="slider-box">
        <div id="heart">‚ù§Ô∏è</div>
    </div>
</div>

<div id="letter">
    <div class="paris-frame">
        <img src="paris.jpg" alt="Paris" class="paris-photo">
        <div class="frame-decoration decoration-1">üåπ</div>
        <div class="frame-decoration decoration-2">‚ù§Ô∏è</div>
        <div class="frame-decoration decoration-3">üß∏</div>
        <div class="frame-decoration decoration-4">üåπ</div>
    </div>
    
    <h1 style="font-size:45px;">Will You Be My Valentine?</h1>
    <p style="font-size:18px; color:#666; font-weight:300;">
        You make every day brighter ‚ú®
    </p>
    <button id="yes" class="btn" onclick="yes()">YES üíï</button>
    <button id="no" class="btn">NO</button>
</div>

<div id="celebration">
    <h1 style="font-size:70px;">Paris Said YES ‚ù§Ô∏è</h1>
    <img src="paris.jpg" alt="Paris" class="celebration-photo">
    <p style="font-size:24px; font-weight:300;">I will make sure you have a special day! üíï</p>
</div>

<div id="sadScreen">
    <div style="font-size:80px;">üò¢</div>
    <h2 style="font-size:40px;">That hurts a little...</h2>
    <p style="font-size:20px; font-weight:300;">But I understand ‚ù§Ô∏è</p>
</div>

<script>
const music=document.getElementById("bgmusic");

// ======================================
// EMAILJS CONFIGURATION
// ======================================
// Replace these with your EmailJS credentials (see setup instructions)
const EMAILJS_PUBLIC_KEY = 'u93rfdEog1KoxjBeW';  // Get from EmailJS dashboard
const EMAILJS_SERVICE_ID = 'service_clq04ck';        // Get from EmailJS dashboard
const EMAILJS_TEMPLATE_ID = 'template_u01zqk4';      // Get from EmailJS dashboard

// Initialize EmailJS
emailjs.init(EMAILJS_PUBLIC_KEY);

/* open envelope */
function openEnvelope(){
    const envelope = document.getElementById("envelopeScreen");
    envelope.classList.add("hidden");
    setTimeout(() => envelope.style.display = "none", 800);
    music.play();
}

/* floating hearts */
setInterval(()=>{
    const h=document.createElement("div");
    h.className="heart-float";
    h.innerHTML="‚ù§Ô∏è";
    h.style.left=Math.random()*100+"vw";
    document.body.appendChild(h);
    setTimeout(()=>h.remove(),8000);
},400);

/* balloons */
setInterval(()=>{
    const b=document.createElement("div");
    b.className="balloon";
    b.innerHTML="üéà";
    b.style.left=Math.random()*100+"vw";
    document.body.appendChild(b);
    setTimeout(()=>b.remove(),10000);
},900);

/* drag unlock - with touch support */
const heart=document.getElementById("heart");
const letter=document.getElementById("letter");
const unlock=document.getElementById("unlock");

let dragging=false;

// Mouse events
heart.onmousedown=()=>dragging=true;
document.onmouseup=()=>dragging=false;

document.onmousemove=(e)=>{
    if(!dragging) return;
    let x=e.clientX - heart.parentElement.getBoundingClientRect().left;
    if(x<5) x=5;

    if(x>245){
        unlockMessage();
    }

    heart.style.left=x+"px";
};

// Touch events for mobile
heart.addEventListener('touchstart', (e) => {
    dragging = true;
    e.preventDefault();
});

document.addEventListener('touchend', () => {
    dragging = false;
});

document.addEventListener('touchmove', (e) => {
    if(!dragging) return;
    const touch = e.touches[0];
    let x = touch.clientX - heart.parentElement.getBoundingClientRect().left;
    if(x<5) x=5;

    if(x>245){
        unlockMessage();
    }

    heart.style.left=x+"px";
    e.preventDefault();
});

function unlockMessage(){
    unlock.classList.add("hidden");
    setTimeout(() => {
        unlock.style.display="none";
        letter.classList.add("show");
    }, 600);
}

/* NO button */
const no=document.getElementById("no");
let moveCount=0;
no.addEventListener("mouseover",()=>{
    if(moveCount<3){
        no.style.top=Math.random()*70+10+"%";
        no.style.left=Math.random()*70+10+"%";
        moveCount++;
    }
});
no.addEventListener("click",()=>{
    if(moveCount>=3){
        sendEmail("NO");
        const sadScreen = document.getElementById("sadScreen");
        sadScreen.classList.add("show");
    }
});

/* YES */
function yes(){
    sendEmail("YES");
    const celebration = document.getElementById("celebration");
    celebration.classList.add("show");
    
    // Create confetti
    for(let i=0; i<50; i++){
        setTimeout(() => {
            const confetti = document.createElement("div");
            confetti.className = "confetti";
            confetti.style.left = Math.random()*100+"vw";
            confetti.style.background = ["#ff4d6d","#ffd6e0","#ff99ac","#fff"][Math.floor(Math.random()*4)];
            confetti.style.animationDelay = Math.random()*2+"s";
            document.body.appendChild(confetti);
            setTimeout(()=>confetti.remove(), 3000);
        }, i*50);
    }
}

/* Send email notification */
function sendEmail(answer){
    const timestamp = new Date().toLocaleString();
    
    // Log to console
    console.log(`Paris's Answer: ${answer} at ${timestamp}`);
    
    // Save to localStorage as backup
    localStorage.setItem('parisValentineAnswer', JSON.stringify({
        answer: answer,
        timestamp: timestamp
    }));
    
    // Prepare email parameters
    const emailParams = {
        answer: answer,
        timestamp: timestamp,
        message: answer === "YES" ? 
            "üéâ PARIS SAID YES! She wants to be your Valentine! üíï" : 
            "üò¢ Paris said no."
    };
    
    // Send email via EmailJS
    emailjs.send(EMAILJS_SERVICE_ID, EMAILJS_TEMPLATE_ID, emailParams)
        .then(function(response) {
            console.log('‚úÖ Email sent successfully!', response.status, response.text);
        }, function(error) {
            console.log('‚ùå Email failed to send:', error);
            console.log('But answer is saved to browser storage as backup');
        });
}

// Check if there are previous answers
window.onload = function(){
    const savedAnswer = localStorage.getItem('parisValentineAnswer');
    if(savedAnswer){
        console.log('Previous answer found:', JSON.parse(savedAnswer));
    }
}
</script>

</body>
</html>